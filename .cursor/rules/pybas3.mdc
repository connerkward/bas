---
description: PyBas3 project rules for AI-powered development
alwaysApply: true
---

# Cursor AI Rules for PyBas3

## Key Files
| Purpose | File |
|---------|------|
| Tasks | [Linear BAS project](https://linear.app/ckward-workspace/project/bas-d90c3a3ab597) |
| Protocols | `PyBas3/agents/AGENT_0_SHARED.md` |
| Quick reference | `PyBas3/agents/SESSION.md` |
| Technical reference | `PyBas3/TECHNICAL_REFERENCE.md` |

## Command Handlers

### When user says "spin up"
1. **Review Linear:** Check [Linear BAS project](https://linear.app/ckward-workspace/project/bas-d90c3a3ab597) for tasks
2. **Pick role:**
   - If user specified (e.g. "spin up as Iris") → use that role
   - "spin up as Orchestrator" → cross-lane integration testing (can touch all modules)
   - If not specified → ask user
3. Pick a task from Linear matching your lane
4. Start working

### When user says "spin down"
1. **Test code changes:**
   - Run `uv run python tests/test_integration.py` for integration tests
   - Run module-specific tests if they exist
   - If testing not verifiable → **FLAG USER AND PAUSE**
2. **DO NOT COMMIT** - leave changes for human to review and commit

## Code Style
- Python: PEP 8, type hints preferred
- Concise comments
- No emojis in code (docs are fine)

## Package Management
- Use **UV** (`uv`) as Python package manager
- Run: `uv sync` to install deps, `uv run <script>` to execute
- Dependencies defined in `PyBas3/pyproject.toml`

## Testing
- **Always run tests before spin down:** `cd PyBas3 && uv run python tests/test_integration.py`
- Module tests: `scoring/test_scorer.py`, `mediapipe/test_vision.sh`
- Integration tests don't need camera (test shared memory + JSON)
- Full Vision/NDI end-to-end requires camera
- **NEVER say "here's how to test it" - RUN THE TEST YOURSELF and verify output**
- Don't leave user hanging with instructions - execute and confirm results

## Architecture
- Each module = independent process
- No shared Python state; communicate via NDI, shared memory, or files
- Atomic writes (temp → rename) for persistent data

## Don't
- Modify `dist/` folders
- Git push (human does that)
- Over-engineer
